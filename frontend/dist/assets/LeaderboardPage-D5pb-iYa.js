import{r as l,j as e,b as f}from"./index-DUtD6WRW.js";import{u as j}from"./userService-BA24lqGw.js";const k=()=>{const[o,h]=l.useState([]),[b,n]=l.useState(!0),[c,x]=l.useState(""),[s,g]=l.useState("karma"),[d,p]=l.useState("all");l.useEffect(()=>{(async()=>{try{n(!0);const y=(await j.getLeaderboard(s,d)).users.map(r=>({id:r.id,username:r.username,avatar:r.profilePicture,preferredRole:r.preferredRole,karmaScore:r.karmaScore,totalWins:r.totalWins,totalGamesPlayed:r.totalGamesPlayed,winRate:r.totalGamesPlayed>0?r.totalWins/r.totalGamesPlayed:0}));h(y),x("")}catch(t){console.error("Failed to fetch leaderboard:",t),x("Failed to load leaderboard. Please try again later.")}finally{n(!1)}})()},[s,d]);const i=a=>{g(a)},m=a=>{p(a)};return b?e.jsx(f,{message:"Loading Leaderboard"}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-display font-bold mb-8",children:"Leaderboard"}),e.jsx("div",{className:"card p-4 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 mr-2",children:"Sort by:"}),e.jsxs("div",{className:"flex gap-2 mt-2 sm:mt-0",children:[e.jsx("button",{onClick:()=>i("karma"),className:`px-3 py-1 rounded-full text-sm ${s==="karma"?"bg-primary-900 text-primary-400 border border-primary-700":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"Karma Score"}),e.jsx("button",{onClick:()=>i("wins"),className:`px-3 py-1 rounded-full text-sm ${s==="wins"?"bg-primary-900 text-primary-400 border border-primary-700":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"Total Wins"}),e.jsx("button",{onClick:()=>i("winRate"),className:`px-3 py-1 rounded-full text-sm ${s==="winRate"?"bg-primary-900 text-primary-400 border border-primary-700":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"Win Rate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 mr-2",children:"Time frame:"}),e.jsxs("div",{className:"flex gap-2 mt-2 sm:mt-0",children:[e.jsx("button",{onClick:()=>m("all"),className:`px-3 py-1 rounded-full text-sm ${d==="all"?"bg-primary-900 text-primary-400 border border-primary-700":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"All Time"}),e.jsx("button",{onClick:()=>m("month"),className:`px-3 py-1 rounded-full text-sm ${d==="month"?"bg-primary-900 text-primary-400 border border-primary-700":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"This Month"}),e.jsx("button",{onClick:()=>m("week"),className:`px-3 py-1 rounded-full text-sm ${d==="week"?"bg-primary-900 text-primary-400 border border-primary-700":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"This Week"})]})]})]})}),c&&e.jsx("div",{className:"bg-secondary-900 border border-secondary-800 text-secondary-200 px-4 py-3 rounded mb-8",children:c}),e.jsx("div",{className:"card p-6",children:o.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400",children:"No leaderboard data available for the selected filters."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b border-dark-600",children:[e.jsx("th",{className:"pb-4 font-medium",children:"Rank"}),e.jsx("th",{className:"pb-4 font-medium",children:"Player"}),e.jsx("th",{className:"pb-4 font-medium text-right",children:"Karma Score"}),e.jsx("th",{className:"pb-4 font-medium text-right",children:"Wins"}),e.jsx("th",{className:"pb-4 font-medium text-right",children:"Games"}),e.jsx("th",{className:"pb-4 font-medium text-right",children:"Win Rate"})]})}),e.jsx("tbody",{children:o.map((a,t)=>e.jsxs("tr",{className:`border-b border-dark-700 ${t<3?"bg-dark-800 bg-opacity-50":""}`,children:[e.jsx("td",{className:"py-4",children:t<3?e.jsx("div",{className:`
                          w-8 h-8 rounded-full flex items-center justify-center font-bold
                          ${t===0?"bg-yellow-900 text-yellow-400":t===1?"bg-gray-800 text-gray-300":"bg-amber-900 text-amber-600"}
                        `,children:t+1}):e.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:t+1})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-900 flex items-center justify-center",children:a.avatar?e.jsx("img",{src:a.avatar,alt:a.username,className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"text-lg font-medium",children:a.username.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.username}),a.preferredRole&&e.jsx("p",{className:"text-sm text-gray-400",children:a.preferredRole})]})]})}),e.jsx("td",{className:"py-4 text-right",children:e.jsx("span",{className:`font-medium ${s==="karma"?"text-primary-400":"text-gray-300"}`,children:a.karmaScore.toLocaleString()})}),e.jsx("td",{className:"py-4 text-right",children:e.jsx("span",{className:`font-medium ${s==="wins"?"text-primary-400":"text-gray-300"}`,children:a.totalWins.toLocaleString()})}),e.jsx("td",{className:"py-4 text-right text-gray-400",children:a.totalGamesPlayed.toLocaleString()}),e.jsx("td",{className:"py-4 text-right",children:e.jsxs("span",{className:`font-medium ${s==="winRate"?"text-primary-400":"text-gray-300"}`,children:[(a.winRate*100).toFixed(1),"%"]})})]},a.id))})]})})})]})};export{k as default};
