import{j as e,L as N,r as n,u as w,a as k,b as C}from"./index-DUtD6WRW.js";import{u as P}from"./useGame-s5k70gI4.js";const y=({games:s})=>s.length===0?e.jsx("div",{className:"card p-6 text-center",children:e.jsx("p",{className:"text-gray-400",children:"No games available"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(t=>e.jsx(S,{game:t},t.id))}),S=({game:s})=>{const t=()=>{switch(s.status){case"active":return"border-tech-500 hover:shadow-neon-tech";case"waiting":return"border-primary-500 hover:shadow-neon";case"completed":return"border-time-500 hover:shadow-neon-time";default:return"border-dark-600"}},i=()=>{switch(s.status){case"active":return"bg-tech-900 text-tech-500 border-tech-700";case"waiting":return"bg-primary-900 text-primary-500 border-primary-700";case"completed":return"bg-time-900 text-time-500 border-time-700";case"abandoned":return"bg-dark-800 text-gray-400 border-dark-600";default:return"bg-dark-800 text-gray-400 border-dark-600"}},m=()=>{switch(s.status){case"active":return"In Progress";case"waiting":return"Waiting for Players";case"completed":return"Completed";case"abandoned":return"Abandoned";default:return s.status}},r=()=>s.status==="waiting"?`/games/${s.id}/lobby`:s.status==="active"?`/games/${s.id}/board`:`/games/${s.id}/summary`;return e.jsx(N,{to:r(),children:e.jsxs("div",{className:`card p-5 border transition-all duration-300 ${t()}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${i()}`,children:m()}),s.isPrivate&&e.jsx("span",{className:"text-xs px-2 py-1 bg-dark-800 text-gray-400 border border-dark-600 rounded-full",children:"Private"})]}),e.jsx("h3",{className:"text-lg font-display font-semibold mb-2",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1 mb-3",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Created by:"})," ",s.creator.username]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Players:"})," ",s.players.length,"/",s.maxPlayers]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Era:"})," ",s.currentEra]}),s.status==="active"&&e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Turn:"})," ",s.currentTurn]})]}),e.jsx("div",{className:"flex -space-x-2 overflow-hidden",children:s.players.map((c,x)=>e.jsx("div",{className:"inline-block h-8 w-8 rounded-full ring-2 ring-dark-800 bg-dark-700 flex items-center justify-center",title:`${c.username} (${c.role})`,children:e.jsx("span",{className:"text-xs font-medium",children:c.username.charAt(0).toUpperCase()})},c.id))})]})})},G=({onClose:s,onCreate:t})=>{const[i,m]=n.useState(""),[r,c]=n.useState(4),[x,h]=n.useState(!1),[u,p]=n.useState("Neo-Renaissance"),[l,o]=n.useState(""),[g,b]=n.useState(""),[d,j]=n.useState(!1),f=["Neo-Renaissance","Quantum Age","Bio-Digital Convergence","Post-Singularity","Cosmic Expansion"],v=async a=>{if(a.preventDefault(),b(""),!i.trim()){b("Please enter a game name");return}if(r<2||r>6){b("Number of players must be between 2 and 6");return}j(!0);try{await t({name:i,maxPlayers:r,isPrivate:x,startingEra:u,description:l.trim()||void 0})}catch{b("Failed to create game. Please try again."),j(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-70",children:e.jsxs("div",{className:"card p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-display font-bold",children:"Create New Game"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors","aria-label":"Close",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g&&e.jsx("div",{className:"bg-secondary-900 border border-secondary-800 text-secondary-200 px-4 py-3 rounded mb-4",children:g}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"name",className:"block text-gray-300 mb-2",children:["Game Name ",e.jsx("span",{className:"text-secondary-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",className:"input w-full",value:i,onChange:a=>m(a.target.value),disabled:d,required:!0,placeholder:"Enter a name for your game"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"maxPlayers",className:"block text-gray-300 mb-2",children:["Max Players ",e.jsx("span",{className:"text-secondary-500",children:"*"})]}),e.jsx("input",{type:"number",id:"maxPlayers",className:"input w-full",value:r,onChange:a=>c(parseInt(a.target.value)),min:2,max:6,disabled:d,required:!0}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Between 2 and 6 players"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"startingEra",className:"block text-gray-300 mb-2",children:["Starting Era ",e.jsx("span",{className:"text-secondary-500",children:"*"})]}),e.jsx("select",{id:"startingEra",className:"input w-full",value:u,onChange:a=>p(a.target.value),disabled:d,required:!0,children:f.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",className:"input w-full min-h-[100px]",value:l,onChange:a=>o(a.target.value),disabled:d,placeholder:"Optional description for your game"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-primary-500 rounded",checked:x,onChange:a=>h(a.target.checked),disabled:d}),e.jsx("span",{className:"ml-2 text-gray-300",children:"Private Game (invite only)"})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"btn-secondary",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:d,children:d?"Creating...":"Create Game"})]})]})]})})},D=()=>{const{user:s}=w(),{games:t,fetchGames:i,loading:m,error:r,createGame:c}=P(),[x,h]=n.useState(!1),u=k();n.useEffect(()=>{i()},[i]);const p=async l=>{try{const o=await c(l);h(!1),u(`/games/${o.id}/lobby`)}catch(o){console.error("Failed to create game:",o)}};return m&&t.length===0?e.jsx(C,{message:"Loading Dashboard"}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-400 mt-2",children:["Welcome back, ",s==null?void 0:s.username]})]}),e.jsx("button",{onClick:()=>h(!0),className:"btn-primary",children:"Create New Game"})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-display font-semibold mb-4",children:"Your Stats"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Games Played"}),e.jsx("p",{className:"text-2xl font-semibold",children:(s==null?void 0:s.totalGamesPlayed)||0})]}),e.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Wins"}),e.jsx("p",{className:"text-2xl font-semibold",children:(s==null?void 0:s.totalWins)||0})]}),e.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Karma Score"}),e.jsx("p",{className:"text-2xl font-semibold",children:(s==null?void 0:s.karmaScore)||0})]})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx(N,{to:"/profile",className:"text-primary-500 hover:text-primary-400",children:"View Full Profile"})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-display font-semibold mb-4",children:"Available Games"}),r&&e.jsx("div",{className:"bg-secondary-900 border border-secondary-800 text-secondary-200 px-4 py-3 rounded mb-4",children:r}),e.jsx(y,{games:t.filter(l=>l.status==="waiting")})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-display font-semibold mb-4",children:"Your Active Games"}),e.jsx(y,{games:t.filter(l=>l.status==="active"&&l.players.some(o=>o.id===(s==null?void 0:s.id)))})]}),x&&e.jsx(G,{onClose:()=>h(!1),onCreate:p})]})};export{D as default};
